

if(message.content.toLowerCase() === pr√©fix + "gobelin des grottes"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin")
    .setColor("#41965c")
    .setImage("https://m.media-amazon.com/images/M/MV5BYTJhMzJlMjAtYjdlZi00ODVmLWIwNDUtMjI3ODA3OGNkZGU0XkEyXkFqcGdeQXVyNDgyODgxNjE@._V1_.jpg")
    .addField(":abacus: Niveau","20")
    .addField(":heart: HP","200")
    .addField(":shield: Armure", "15")
    .addField(":crossed_swords: Attaque", "?GT attaque")
    .addField(":shield: D√©fense", "?GT blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?G r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "gobelin archer"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin archer")
    .setColor("#41965c")
    .setImage("https://cdna.artstation.com/p/assets/covers/images/001/037/088/large/fjf-toledo-archer-goblin-by-fjftoledo1.jpg?1438713678")
    .addField(":abacus: Niveau","22")
    .addField(":heart: HP","150")
    .addField(":shield: Armure", "20")
    .addField(":crossed_swords: Attaque", "?GA attaque")
    .addField(":shield: D√©fense", "?GA blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?GA r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "gobelin assassin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin assassin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eeba25a9-9ec6-40ad-8de3-cd92204aaa20/d5oba9j-82ef3fcb-3312-447d-962b-f42995bb4cb3.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2VlYmEyNWE5LTllYzYtNDBhZC04ZGUzLWNkOTIyMDRhYWEyMFwvZDVvYmE5ai04MmVmM2ZjYi0zMzEyLTQ0N2QtOTYyYi1mNDI5OTViYjRjYjMuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.XmdDLAZM6uSFXYNCVsdCDHBDBl4kTvNtmNN3BZ6s9Cc")
    .addField(":abacus: Niveau","25")
    .addField(":heart: HP","250")
    .addField(":shield: Armure", "25")
    .addField(":crossed_swords: Attaque", "?GAS attaque")
    .addField(":shield: D√©fense", "?GAS blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?GA r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "gobelin paladin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin paladin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/4ca2f2d1-d994-40ce-916a-55d3dd30fb2b/dbj8erm-a43ef628-cb13-464c-ae4b-170addc5f7bb.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzRjYTJmMmQxLWQ5OTQtNDBjZS05MTZhLTU1ZDNkZDMwZmIyYlwvZGJqOGVybS1hNDNlZjYyOC1jYjEzLTQ2NGMtYWU0Yi0xNzBhZGRjNWY3YmIuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.GsPfl_40jmlQMpn24Cse3d76AVsKw1sZegifoPGvbu0")
    .addField(":abacus: Niveau","26")
    .addField(":heart: HP","300")
    .addField(":shield: Armure", "40")
    .addField(":crossed_swords: Attaque", "?GP attaque")
    .addField(":shield: D√©fense", "?GP blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?GP r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "chevalier maudit"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Chevalier maudit")
    .setColor("#743ca9")
    .setImage("https://i.pinimg.com/originals/5e/57/c1/5e57c11868a3720b8be51a7bae47f536.jpg")
    .addField(":abacus: Niveau","30")
    .addField(":heart: HP","450")
    .addField(":beginner: Passif", "Le chevalier ne rate jamais ses attaques.")
    .addField(":shield: Armure", "30")
    .addField(":crossed_swords: Attaque", "?CH attaque")
    .addField(":shield: D√©fense", "?CH blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?CH r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "famillier maudit"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Famillier maudit")
    .setColor("#743ca9")
    .setImage("https://64.media.tumblr.com/5a4fea6e9c3e2350a9eeb649579299be/tumblr_pnc6up9xaU1rfyiu4o3_1280.jpg")
    .addField(":abacus: Niveau","29")
    .addField(":heart: HP","650")
    .addField(":beginner: Passif", "Si un chevalier maudit est pr√©sent, alors le famillier ne fera aucun ciblage et attaquera l'adversaire du chevalier maudit.")
    .addField(":shield: Armure", "0")
    .addField(":crossed_swords: Attaque", "?FM attaque")
    .addField(":shield: D√©fense", "?FM blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?FM r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "hobgobelin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Hobgobelin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/cd6c7bc4-7d67-42b7-9ea8-ba3815491ed0/dcsadku-fbce5fc3-4d23-4ad0-854b-3f14dffed7c1.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2NkNmM3YmM0LTdkNjctNDJiNy05ZWE4LWJhMzgxNTQ5MWVkMFwvZGNzYWRrdS1mYmNlNWZjMy00ZDIzLTRhZDAtODU0Yi0zZjE0ZGZmZWQ3YzEucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.4Avzt7-cO0SoGJEAAEHk7tCzk1hs8EgLTKOulbMaTbI")
    .addField(":abacus: Niveau","40")
    .addField(":heart: HP","1000")
    .addField(":shield: Armure", "50")
    .addField(":crossed_swords: Attaque", "?HG attaque")
    .addField(":shield: D√©fense", "?HG blocage [d√©g√¢ts]")
    .addField(":moneybag: R√©compense", "?HG r√©compense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === pr√©fix + "gt attaque"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 90){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin r√©ussit √† vous toucher !", ":crossed_swords:" + y )
    } else {
        // D√©gat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin r√©ussit √† vous toucher de mani√®re critique !", ":crossed_swords:" + y)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "gt"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 90){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin r√©ussit √† vous toucher !", ":crossed_swords:" + y )
    } else {
        // D√©gat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin r√©ussit √† vous toucher de mani√®re critique !", ":crossed_swords:" + y)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "ga attaque"){
    var min = 60;
    var max = 100; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("L'archer rate son attaque")
    }else if (result <= 60){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'archer vous tire une fl√®che sur votre plastron !", ":bow_and_arrow: " + y )
    } else {
        premiere = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        deuxi√®me = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        troisi√®me = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        quatri√®me = Math.floor(y/3);
        // D√©gat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin vous tire plusieurs fl√®ches succesivement !", ":bow_and_arrow: " + premiere + "\n:bow_and_arrow: " + deuxi√®me + "\n:bow_and_arrow: " + troisi√®me + "\n:bow_and_arrow: " + quatri√®me)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "gas attaque"){
    var min = 75;
    var max = 120; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("L'assassin rate son attaque")
    }else if (result <= 60){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'assassin vous plante une dague dans votre torse !", ":dagger: " + y )
    } else {
        premiere = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        deuxi√®me = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        troisi√®me = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        quatri√®me = Math.floor(y/3);
        // D√©gat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin vous donne plusieurs coups de dagues succesivement !", ":dagger: " + premiere + "\n:dagger: " + deuxi√®me + "\n:dagger: " + troisi√®me + "\n:dagger: " + quatri√®me)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "gp attaque"){
    var min = 60;
    var max = 70; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 15){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 45){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin vous donne un coup d'√©p√©e !", ":crossed_swords: " + y )
    } else if(result <= 80) {

        // D√©gat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'√©p√©e du paladin devient rouge...En vous donnant un coup, vous devenez provoqu√© et ne pouvez pas cibler une autre personne que lui au prochain tour.  !", ":crossed_swords: " + y)
    } else {
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .setTitle("Le paladin hurle de rage. 3 personnes(faire un ciblage) ne pourront pas cibler un autre monstre que lui durant le prochain tour.")
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "ch attaque"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        y = Math.floor(y/2)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .addField("Le chevalier n'arrive pas √† vous atteindre correctement et se contente de donner un coup d'estoc", ":crossed_swords: " + y)
    }else if (result <= 80){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le chevalier vous donne un coup d'√©p√©e !", ":crossed_swords: " + y )
    } else  {
        // D√©gat normaux
        result = Math.floor(result/1.5)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le chevalier sort un grapain de sa ceinture. Il la lance sur une personne qui se situe en deuxi√®me ligne et l'attire vers lui (premi√®re ligne) !", ":crossed_swords: " + y)
    } 
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === pr√©fix + "hg attaque"){
    var min = 80;
    var max = 150; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le hobgobelin rate son attaque...C'est un miracle !")
        }else if (result <= 30){
        // Critique
        y = Math.floor(y/1.5)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le hobgobelin donne un coup contre le sol faisant trembler le sol et cr√©ant un mini s√©isme...Attaque imblocable pour tous le groupe !", ":crossed_swords: " + y )
    }else if (result <= 85){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le hobgobelin va vous donner un coup de batte.", ":crossed_swords: " + y )
    } else if (result <= 101){
        // D√©gat normaux
        y = Math.floor(y*1.2)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .setImage("https://media1.giphy.com/media/WoLbiZxOu0Na83cfuD/giphy.gif")
        .addField("Le chef de la grotte va soudainement vous envoyer valser en l'air. Vous √™tes maintenant hors combat pendant 2 tours(sans compter celui-l√†)", ":crossed_swords: " + y)
    } 
    message.channel.send(help_embed);
} 

if(command === 'gt'){
    id = message.author.id;
    if(bdd[id]){
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*1.3);
                var min = Math.floor(degat*1.1)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 15;
                ancienY = y;
                y = y - armure
                if(result <= 70){
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin essaye d'esquiver mais cela √©choue !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .setTitle("Le gobelin r√©ussit son esquive !")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(35);
                var min_value = Math.floor(25);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(5);
                var min_value = Math.floor(0);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                               bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze


                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze et **" + argent + "** pi√®ces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'ga'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.9);
                var min = Math.floor(degat*0.85)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 22;
                if(result <= 15){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive pas √† bloquer l'attaque !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 95) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("L'archer tant bien que de mal √† bloquer le coup.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .addField("Le gobelin bloque l'attaque parfaitement !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(35);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(5);
                var min_value = Math.floor(0);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze et **" + argent + "** pi√®ces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}


if(command === 'gas'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*1.1);
                var min = Math.floor(degat*0.9)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 25;
                if(result <= 10){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive ni √† bloquer, ni √† esquiver l'attaque !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 80) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("L'assassin essaye de bloquer le coup comme il peu, mais √©tant un assassin...Cela est bien plus difficile que ce qui n'y parait !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .setTitle("Le gobelin va faire une pirouette en arri√®re, esquivant donc votre attaque.")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(8);
                var min_value = Math.floor(3);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze et **" + argent + "** pi√®ces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}


if(command === 'gp'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.85);
                var min = Math.floor(degat*0.7)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 40;
                if(result <= 5){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive pas √† bloquer l'attaque!", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 70) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin bloque l'attaque sans trop de difficult√©.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 85) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin va bloquer l'attaque et vous d√©fier du regard. Vous √™tes donc provoqu√© pour le prochain tour !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin va bloquer l'attaque √† la perfection !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 26;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(7);
                var min_value = Math.floor(3);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze et **" + argent + "** pi√®ces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'ch'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.9);
                var min = Math.floor(degat*0.75)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 30;
                if(result <= 10){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le chevalier maudit rate son blocage !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result < 90) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le chevalier maudit va bloquer l'attaque √† l'aide de son √©p√©e.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 101) {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le chevalier maudit bloque une grande partie des d√©g√¢ts !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } 
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 40;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                console.log(args[1])
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(60);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(15);
                var min_value = Math.floor(10);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze et **" + argent + "** pi√®ces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'fm'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.95);
                var min = Math.floor(degat*0.82)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 0;
                if(result <= 5){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le famillier n'arrive pas √† esquiver l'attaque!", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result < 75) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le famillier va bondir sur le c√¥t√©, recevant n√©anmoins une partie des d√©g√¢ts.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 101) {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .setTitle("Le famillier esquive l'attaque.")
                } 
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "r√©compense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                console.log(args[1])
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(75);
                var min_value = Math.floor(50);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;


                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagn√© de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pi√®ces de bronze.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("r√©compense de rien du tout mon reuf.")
            }
        }
    }
}



if(message.content.toLowerCase() === pr√©fix + "epee de folie") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("√©p√©e de folie")
    .setColor("#4A007E")
    .setImage("https://cdna.artstation.com/p/assets/images/images/021/026/414/large/francois-cannels-brightswordfinal-lowres.jpg?1570090378")
    .addField(":trident: **__Comp√©tence__**","Vous d√©bloquez la comp√©tence : ?Mparade [d√©g√¢ts re√ßu]")
    .addField(":crossed_swords: **__Classe utilisable__**","Chevalier")
    .addField(":beginner: **__Passif__**", "L'√©p√©e de folie est comme son nom l'indique une √©p√©e qui vous rendra fou...Elle rend petit √† petit impulsif son porteur, voir le transformera peu √† peu en ''b√™te'' dans le sens o√π il ne sera pas rare que ce dernier grogne face √† un doute ou lorsqu'il y a un probl√®me. Le probl√®me majeur de cette √©p√©e, est qu'au bout d'une semaine compl√®te, le porte deviendra bien plus qu'impulsif.")
    .addField(":beginner: **__Passif (suite)__**","Frapper(avec de r√©elle comp√©tences) ses compagnons lorsqu'il y a un d√©saccord ou bien hurler sur quelqu'un pour la moindre petites b√™tises ou doute sera votre quotidien....Vous n'arriverez plus √† redevenir quelqu'un de calme. Votre sang froid aura totalement disparu pour laisser place peu √† peu √† un √™tre nourrit par la violence et la haine. N√©anmoins ! Votre impulsivit√© et vos ''hurlements'' peuvent dispara√Ætre temporairement uniquement si toutes les personnes de votre groupes sont des d√©mons, ou bien des Berserks. Ou bien, que vous soyez √©loign√© de tous conflits et de toutes zones PVE durant 2-3 jours.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme l√©gendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre epee de folie")
    message.channel.send(help_embed);   
}

if(command === 'mparade'){
    id = message.author.id;
    if(bdd[id]){
        armor = bdd[id].ARactuel
        if(args[1] == "perce"){
            numeroUno = true;
            armor = 0
        } else {
            numeroUno = false;
        }
        test = verifArgs()
        if(test != 0){
            var nombre = Math.floor((Math.random() * 100) + 1);
            var min = Math.floor(Math.min(args[0]*1.6));
            var max = Math.floor(Math.max(args[0]*1.9)); 
            var result = Math.floor(Math.random() * (max - min + 1) ) + min;
            if(nombre < 0 ){
                HP = HPblocage(result, numeroUno)
                var y =new Discord.MessageEmbed()
                .setColor("#E74C3C")
                .addField("**D√©fense**","**Votre parade est un echec !** \n|| :anger:-" + result + " + üõ°Ô∏è " + armor + " = -" + degat +"||\n ‚ù§Ô∏è " + HP + "-----> ‚ù§Ô∏è " + bdd[id].HPactuel)
                .setImage("https://i.imgur.com/Lpv5HId.jpg")
            } else {
                    var min = Math.floor(Math.min(args[0]*1.2));
                    var max = Math.floor(Math.max(args[0]*1.4)); 
                    var Degat = Math.floor(Math.random() * (max - min + 1) ) + min;
                var y =new Discord.MessageEmbed()
                .setColor("#489ed7")
                .addField("**D√©fense**","**Votre parade au corps √† corps est une r√©ussite ! Vous ne recevez aucun d√©g√¢t et infligez des d√©g√¢ts proportionnels √† l'attaque de votre adversaire !** \n :anger: " + Degat)
                .setImage("https://j.gifs.com/5QWDJB.gif")
            }
            Savebdd();
            message.channel.send(y);
            if(bdd[id].HPactuel <= 0){
                message.member.setNickname(bdd[id].prenom + "  [‚ò†Ô∏è KO]")
            } else {
                message.member.setNickname(bdd[id].prenom + " [‚ù§Ô∏è" + bdd[id].HPactuel + "] [üõ°Ô∏è"+bdd[id].ARactuel +"] [‚ú®" + bdd[id].MAactuel + "]")
            }
        } else {
            message.channel.send("Le nombre ! ")
        }
    }else{
        message.channel.send("Prot√®ge toi de ta d√©bilit√©")
    }
}


if(message.content.toLowerCase() === pr√©fix + "ancien arc elfique") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Ancien arc elfique")
    .setColor("#4A007E")
    .setImage("https://www.wallpaperflare.com/static/975/682/411/fantasy-art-bow-and-arrow-kitsunemimi-man-wallpaper.jpg")
    .addField(":trident: **__Comp√©tence__**","Vous d√©bloquez la comp√©tence : ?Tir de zone [nombre de cibles]")
    .addField(":bow_and_arrow: **__Classe utilisable__**","Archer")
    .addField(":beginner: **__Passif__**", "Le malus de l'arc est simple...Au bout de deux semaines vous deviendrez compl√©tement aveugle en contre partie d'une ''superbe ou√Øe''. En soit vous pourrez savoir quand quelqu'un se d√©place/r√©ussirait √† vous l'imaginer dans la t√™te et j'en passe...Mais jamais (√† moins d'abandonner l'arc) vous ne pourrez retrouver la vue.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme l√©gendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre ancien arc elfique")
    message.channel.send(help_embed);     
}


if(SuperArgs[0].toLowerCase() ==  '-tir' && SuperArgs[1] == 'de' && SuperArgs[2] == 'zone'){    
    id = message.author.id;
    if(bdd[id]){
        if (bdd[id].MAactuel >= 70){
            NbEnnemis = parseInt(SuperArgs[3])

            if(Number.isInteger(NbEnnemis)){

                var nombre = Math.floor((Math.random() * 100) + 1);
                attaque = bdd[id].ATactuel;
                var max_value = Math.floor(attaque*0.7);
                var min_value = Math.floor(attaque*0.5)
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                multiplicateur = 1 + 0.15 * NbEnnemis;
                result = Math.floor(result*multiplicateur)
                id = message.author.id; 
                ancienMana = bdd[id].MAactuel
                if(nombre < 10)
                    var y = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .setAuthor("Votre tir de zone ne fonctionne pas...")
                    .setImage("https://i.kym-cdn.com/photos/images/original/000/911/028/14e.jpg")
                else       {   
                    bdd[id].MAactuel = bdd[id].MAactuel - 80
                    var y = new Discord.MessageEmbed()
                    .setColor("#e21700")
                    .addField("**Attaque**","**Vous tirez une pluie de fl√®che sur la totalit√© de vos adversaire(Plus il y a d'adversaires, plus la comp√©tence monte en d√©g√¢ts).**\n" +  ":bow_and_arrow:" + result + "\n :sparkles: " + ancienMana + " -----> :sparkles: " +  bdd[id].MAactuel)
                    .setImage("https://i.pinimg.com/originals/12/d6/62/12d66280a3a7a9abc2b3e03e09bd01cc.jpg")
                } 
                nomRP()
                Savebdd()
                message.channel.send(y);
            }
        } else {
            message.channel.send("Vous n'avez plus de mana")
        }
        
    } else {
        message.channel.send("Tu n'es pas enregistr√©, ne crie pas sale enfant")
    }
}


if(message.content.toLowerCase() === pr√©fix + "dague sinistre") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Dague sinistre")
    .setColor("#4A007E")
    .setImage("https://cdnb.artstation.com/p/assets/images/images/017/828/425/large/kostiantyn-buryak-poster.jpg?1557479551")
    .addField(":trident: **__Comp√©tence__**","Vous d√©bloquez la comp√©tence ?Mesquive [d√©g√¢ts re√ßu]")
    .addField(":dagger: **__Classe utilisable__**","Assassin")
    .addField(":beginner: **__Passif__**", "Le porteur de la dague va petit √† petit devenir quelqu'un de bien silencieux...Si dans le pass√© il √©tait diplomate, alors il pourra abandonner les grands discours laissant maintenant place √† des chuchotements aupr√®s de ses camarades. D'ailleurs, rare sont les personnes auxquelles il voudra communiquer. Cela se limitera g√©n√©ralement √† 2-3 personnes, ou bien √† d'autres membres qui seraient de la lign√©e des voleurs")
    .addField(":beginner: **__Passif (suite)__**","Il y a 3 exceptions √† cette r√®gle. S'il vous veut du mal, alors il parlera d'une voix lambda et cela m√™me si ses paroles pourraient vous laiss√© croire le contraire ! √Ä l'inverse, s'il vous appr√©cie un peu trop ou qu'il vous porte un peu trop d'int√©r√™t...Alors un c√¥t√© ''protecteur'' pourrait se voir n'√™tre en lui. Si vous n'√™tes ni un de ses camarades, ni un voleur et qu'il se sent forc√© de vous r√©pondre, alors il peut faire quelques gestuelles...Mais ce n'est pas le language des signes ! Cela se limitera √† des signes basiques.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme l√©gendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre dague sinistre")
    message.channel.send(help_embed);     
}


if(command === 'mesquive'){
    id = message.author.id;
    if(bdd[id]){
        armor = bdd[id].ARactuel
        if(args[1] == "perce"){
            numeroUno = true;
            armor = 0
        } else {
            numeroUno = false;
        }   
             var min = Math.floor(Math.min(args[0]*1.4));
        var max = Math.floor(Math.max(args[0]*1.7)); 
        var result = Math.floor(Math.random() * (max - min + 1) ) + min;
        var min = 0
        var max = 100
        var aleatoire = Math.floor(Math.random() * (max - min + 1) ) + min;
        /// BDD

            chance = 65;
            if(aleatoire < chance){
                var y = new Discord.MessageEmbed()
                .setColor("#ff4444")
                .addField("**D√©fense**","**Vous esquivez l'attaque gr√¢ce √† votre grande agilit√©.**")
                .setImage("https://static.wikia.nocookie.net/onepunchman/images/1/17/Sonic_dodges_genos.gif")
            } else {
                HP = HPblocage(result)
                Savebdd(); 
                if(bdd[id].HPactuel <= 0){
                    message.member.setNickname(bdd[id].prenom + "  [‚ò†Ô∏è KO]")
                } else {
                    message.member.setNickname(bdd[id].prenom + " [‚ù§Ô∏è" + bdd[id].HPactuel + "] [üõ°Ô∏è"+bdd[id].ARactuel +"] [‚ú®" + bdd[id].MAactuel + "]")
                }
                var y =new Discord.MessageEmbed()
                .setColor("#E74C3C")
                .addField("**D√©fense**","**Votre roulade √©choue...** \n|| :anger:-" + result + " + üõ°Ô∏è " + armor + " = -" + degat +"||\n ‚ù§Ô∏è " + HP + " -----> ‚ù§Ô∏è " + bdd[id].HPactuel)
                .setImage("https://i1.wp.com/www.animefeminist.com/wp-content/uploads/2018/10/6dc848b02d9417013345e6e92256f3b7.png?ssl=1")
            }
            message.channel.send(y);
        
    }
}

if(message.content.toLowerCase() === pr√©fix + "grimoire abandonn√©") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Grimoire abandonn√©")
    .setColor("#4A007E")
    .setImage("https://img5.goodfon.com/wallpaper/nbig/5/4e/elena-kondratova-grimoire-cg-art-fentezi-kniga-magiia.jpg")
    .addField(":trident: **__Comp√©tence__**","Vous d√©bloquez la comp√©tence : ?Disparition")
    .addField(":book: **__Classe utilisable__**","Sorcier et sorcier t√©n√©breux")
    .addField(":beginner: **__Passif__**", "Le malus est plut√¥t simple. D√©j√† et premi√®rement, vous ne pouvez utiliser la comp√©tence qu'une fois par jour. Ensuite, √† partir du moment o√π vous utiliserez la comp√©tence, vous aurez un mal de cr√¢ne interminable pendant une dur√©e de 24h.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme l√©gendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre grimoire abandonn√©")
    message.channel.send(help_embed);     
}


if(message.content.toLowerCase() === pr√©fix + "disparition"){    
    id = message.author.id;
    if(bdd[id]){
        if (talkedRecentlyGrimoire.has(message.author.id) && bdd[id].MAactuel > 150) {
            message.channel.send("Merci d'attendre 24h ou bien d'avoir au minimum 150 de mana.");
        } else {
                ancienMana = bdd[id].MAactuel
                bdd[id].MAactuel =  bdd[id].MAactuel - 150
                    var y = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Disparition !", "Vous pouvez cibler un adversaire (sauf ''boss'') qui dispara√Ætra du combat(vous ne pouvez donc pas prendre sa r√©compense). Cette comp√©tence n'est pas utilisable sur les joueurs, sauf si ce dernier est un Berserk, une liche, une ghoul, ou un d√©mon(le joueur sera alors t√©l√©port√© dans un autre channel(zone)).\nLa comp√©tence est utilisable une fois toutes les 24h. Apr√®s son utilisation, le ''lanceur'' se verra √™tre atteint d'une tr√®s grosse migraine quasi permanente pendant 12h, ce qui l'emp√™chera d'utiliser la moindre comp√©tence (et donc, ne peux plus combattre √† partir de la fin de son combat).\n :sparkles: " + ancienMana + " -----> :sparkles: " +  bdd[id].MAactuel)
                    .setImage("https://thumbs.gfycat.com/AdolescentRelievedBighornsheep-size_restricted.gif")
                message.channel.send(y);
                Savebdd()
                nomRP()
                talkedRecently3.add(message.author.id);
                setTimeout(() => {
                // Removes the user from the set after a minute
                talkedRecently3.delete(message.author.id);
                }, 86400000);
        } 
    } else {
        message.channel.send("Tu n'es pas enregistr√©, ne crie pas sale enfant")
    }
}


if(message.content.toLowerCase() === pr√©fix + "bouclier maudit") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Bouclier maudit")
    .setColor("#4A007E")
    .setImage("https://i.pinimg.com/originals/34/1f/48/341f482aaa1f2deed465239d124ce936.jpg")
    .addField(":trident: **__Comp√©tence__**","Vous d√©bloquez la comp√©tence : ?Crie squelettique")
    .addField(":shield: **__Classe utilisable__**","Paladin")
    .addField(":beginner: **__Passif__**", "Le malus du bouclier est simple, plus vous allez passer du temps avec votre bouclier, plus vous allez finir schizophr√®ne. Vous allez croire et √™tre persuad√© que le bouclier renferme un esprit qui est votre conseiller si ce n'est meilleur ami. R√©alit√© ou bien simple mal√©diction ? Allez savoir. Le probl√®me √©tant que ''l'esprit'' a un comportement qui peut radicalement changer selon son utilisateur.")
    .addField(":beginner: **__Passif (suite)__**", "Pour faire simple, l'esprit que va croire entendre le paladin est uniquement l√† pour lui dire si quelque chose est bien ou mal. Le paladin ne sait pas de quelle race √©tait l'esprit, son nom, son pr√©nom...Bref, ll ne sait absolument rien de lui ! Ce dernier se contente uniquement de lui dire si une chose est bien ou mal et cela va grandement influencer l'utilisateur sur ses choix. (Dans certains cas, cela peut-√™tre un esprit ''hostile'' qui favorise les mauvais choix, et dans d'autres cas, il peut-√™tre bienveillant).")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme l√©gendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre bouclier maudit.")
    message.channel.send(help_embed);     
}

if(message.content.toLowerCase() === pr√©fix + "crie squelettique"){    
    id = message.author.id;
    if(bdd[id]){
            if(nombre < 20)
                var y = new Discord.MessageEmbed()
                .setColor("#ffffff")
                .setAuthor("Votre hurlement n'a aucun effet...")
                .setImage("https://i.kym-cdn.com/photos/images/original/000/911/028/14e.jpg")
            else {
                var y = new Discord.MessageEmbed()
                .setColor("#e21700")
                .setTitle("Vous venez √† taper sur votre bouclier tout en hurlant haut et fort. Vous avez provoqu√© tous les adversaires pour le prochain tour. S'ils attaquent, vous serez pris pour cible(utilisable une fois par combat).")
                .setImage("https://w.wallha.com/ws/7/CRvNGrWB.jpg")
             }
            message.channel.send(y);
    } else {
        message.channel.send("Tu n'es pas enregistr√©, ne crie pas sale enfant")
    }
}
/// Shop 