

if(message.content.toLowerCase() === préfix + "gobelin des grottes"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin")
    .setColor("#41965c")
    .setImage("https://m.media-amazon.com/images/M/MV5BYTJhMzJlMjAtYjdlZi00ODVmLWIwNDUtMjI3ODA3OGNkZGU0XkEyXkFqcGdeQXVyNDgyODgxNjE@._V1_.jpg")
    .addField(":abacus: Niveau","20")
    .addField(":heart: HP","200")
    .addField(":shield: Armure", "15")
    .addField(":crossed_swords: Attaque", "?GT attaque")
    .addField(":shield: Défense", "?GT blocage [dégâts]")
    .addField(":moneybag: Récompense", "?G récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "gobelin archer"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin archer")
    .setColor("#41965c")
    .setImage("https://cdna.artstation.com/p/assets/covers/images/001/037/088/large/fjf-toledo-archer-goblin-by-fjftoledo1.jpg?1438713678")
    .addField(":abacus: Niveau","22")
    .addField(":heart: HP","150")
    .addField(":shield: Armure", "20")
    .addField(":crossed_swords: Attaque", "?GA attaque")
    .addField(":shield: Défense", "?GA blocage [dégâts]")
    .addField(":moneybag: Récompense", "?GA récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "gobelin assassin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin assassin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/eeba25a9-9ec6-40ad-8de3-cd92204aaa20/d5oba9j-82ef3fcb-3312-447d-962b-f42995bb4cb3.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2VlYmEyNWE5LTllYzYtNDBhZC04ZGUzLWNkOTIyMDRhYWEyMFwvZDVvYmE5ai04MmVmM2ZjYi0zMzEyLTQ0N2QtOTYyYi1mNDI5OTViYjRjYjMuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.XmdDLAZM6uSFXYNCVsdCDHBDBl4kTvNtmNN3BZ6s9Cc")
    .addField(":abacus: Niveau","25")
    .addField(":heart: HP","250")
    .addField(":shield: Armure", "25")
    .addField(":crossed_swords: Attaque", "?GAS attaque")
    .addField(":shield: Défense", "?GAS blocage [dégâts]")
    .addField(":moneybag: Récompense", "?GA récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "gobelin paladin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Gobelin paladin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/4ca2f2d1-d994-40ce-916a-55d3dd30fb2b/dbj8erm-a43ef628-cb13-464c-ae4b-170addc5f7bb.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzRjYTJmMmQxLWQ5OTQtNDBjZS05MTZhLTU1ZDNkZDMwZmIyYlwvZGJqOGVybS1hNDNlZjYyOC1jYjEzLTQ2NGMtYWU0Yi0xNzBhZGRjNWY3YmIuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.GsPfl_40jmlQMpn24Cse3d76AVsKw1sZegifoPGvbu0")
    .addField(":abacus: Niveau","26")
    .addField(":heart: HP","300")
    .addField(":shield: Armure", "40")
    .addField(":crossed_swords: Attaque", "?GP attaque")
    .addField(":shield: Défense", "?GP blocage [dégâts]")
    .addField(":moneybag: Récompense", "?GP récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "chevalier maudit"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Chevalier maudit")
    .setColor("#743ca9")
    .setImage("https://i.pinimg.com/originals/5e/57/c1/5e57c11868a3720b8be51a7bae47f536.jpg")
    .addField(":abacus: Niveau","30")
    .addField(":heart: HP","450")
    .addField(":beginner: Passif", "Le chevalier ne rate jamais ses attaques.")
    .addField(":shield: Armure", "30")
    .addField(":crossed_swords: Attaque", "?CH attaque")
    .addField(":shield: Défense", "?CH blocage [dégâts]")
    .addField(":moneybag: Récompense", "?CH récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "famillier maudit"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Famillier maudit")
    .setColor("#743ca9")
    .setImage("https://64.media.tumblr.com/5a4fea6e9c3e2350a9eeb649579299be/tumblr_pnc6up9xaU1rfyiu4o3_1280.jpg")
    .addField(":abacus: Niveau","29")
    .addField(":heart: HP","650")
    .addField(":beginner: Passif", "Si un chevalier maudit est présent, alors le famillier ne fera aucun ciblage et attaquera l'adversaire du chevalier maudit.")
    .addField(":shield: Armure", "0")
    .addField(":crossed_swords: Attaque", "?FM attaque")
    .addField(":shield: Défense", "?FM blocage [dégâts]")
    .addField(":moneybag: Récompense", "?FM récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "hobgobelin"){
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Hobgobelin")
    .setColor("#41965c")
    .setImage("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/cd6c7bc4-7d67-42b7-9ea8-ba3815491ed0/dcsadku-fbce5fc3-4d23-4ad0-854b-3f14dffed7c1.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2NkNmM3YmM0LTdkNjctNDJiNy05ZWE4LWJhMzgxNTQ5MWVkMFwvZGNzYWRrdS1mYmNlNWZjMy00ZDIzLTRhZDAtODU0Yi0zZjE0ZGZmZWQ3YzEucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.4Avzt7-cO0SoGJEAAEHk7tCzk1hs8EgLTKOulbMaTbI")
    .addField(":abacus: Niveau","40")
    .addField(":heart: HP","1000")
    .addField(":shield: Armure", "50")
    .addField(":crossed_swords: Attaque", "?HG attaque")
    .addField(":shield: Défense", "?HG blocage [dégâts]")
    .addField(":moneybag: Récompense", "?HG récompense [nombre de joueur]")
    message.channel.send(help_embed)
}

if(message.content.toLowerCase() === préfix + "gt attaque"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 90){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin réussit à vous toucher !", ":crossed_swords:" + y )
    } else {
        // Dégat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin réussit à vous toucher de manière critique !", ":crossed_swords:" + y)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "gt"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 90){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin réussit à vous toucher !", ":crossed_swords:" + y )
    } else {
        // Dégat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin réussit à vous toucher de manière critique !", ":crossed_swords:" + y)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "ga attaque"){
    var min = 60;
    var max = 100; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("L'archer rate son attaque")
    }else if (result <= 60){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'archer vous tire une flèche sur votre plastron !", ":bow_and_arrow: " + y )
    } else {
        premiere = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        deuxième = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        troisième = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        quatrième = Math.floor(y/3);
        // Dégat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin vous tire plusieurs flèches succesivement !", ":bow_and_arrow: " + premiere + "\n:bow_and_arrow: " + deuxième + "\n:bow_and_arrow: " + troisième + "\n:bow_and_arrow: " + quatrième)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "gas attaque"){
    var min = 75;
    var max = 120; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("L'assassin rate son attaque")
    }else if (result <= 60){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'assassin vous plante une dague dans votre torse !", ":dagger: " + y )
    } else {
        premiere = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        deuxième = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        troisième = Math.floor(y/3);
        y = Math.floor(Math.random() * (max - min + 1) ) + min;
        quatrième = Math.floor(y/3);
        // Dégat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le gobelin vous donne plusieurs coups de dagues succesivement !", ":dagger: " + premiere + "\n:dagger: " + deuxième + "\n:dagger: " + troisième + "\n:dagger: " + quatrième)
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "gp attaque"){
    var min = 60;
    var max = 70; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 15){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le gobelin rate son attaque")
    }else if (result <= 45){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("Le gobelin vous donne un coup d'épée !", ":crossed_swords: " + y )
    } else if(result <= 80) {

        // Dégat normaux
        var help_embed = new Discord.MessageEmbed()
        .setColor("#41965c")
        .addField("L'épée du paladin devient rouge...En vous donnant un coup, vous devenez provoqué et ne pouvez pas cibler une autre personne que lui au prochain tour.  !", ":crossed_swords: " + y)
    } else {
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .setTitle("Le paladin hurle de rage. 3 personnes(faire un ciblage) ne pourront pas cibler un autre monstre que lui durant le prochain tour.")
    }
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "ch attaque"){
    var min = 60;
    var max = 80; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        y = Math.floor(y/2)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .addField("Le chevalier n'arrive pas à vous atteindre correctement et se contente de donner un coup d'estoc", ":crossed_swords: " + y)
    }else if (result <= 80){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le chevalier vous donne un coup d'épée !", ":crossed_swords: " + y )
    } else  {
        // Dégat normaux
        result = Math.floor(result/1.5)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .addField("Le chevalier sort un grapain de sa ceinture. Il la lance sur une personne qui se situe en deuxième ligne et l'attire vers lui (première ligne) !", ":crossed_swords: " + y)
    } 
    message.channel.send(help_embed);
} 

if(message.content.toLowerCase() === préfix + "hg attaque"){
    var min = 80;
    var max = 150; 
    var y = Math.floor(Math.random() * (max - min + 1) ) + min;
    var result = Math.floor((Math.random() * 100) + 1);
    if(result <= 10){
        // Echec
        var help_embed = new Discord.MessageEmbed()
        .setColor("#ffffff")
        .setTitle("Le hobgobelin rate son attaque...C'est un miracle !")
        }else if (result <= 30){
        // Critique
        y = Math.floor(y/1.5)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le hobgobelin donne un coup contre le sol faisant trembler le sol et créant un mini séisme...Attaque imblocable pour tous le groupe !", ":crossed_swords: " + y )
    }else if (result <= 85){
        // Critique
        var help_embed = new Discord.MessageEmbed()
        .setColor("#743ca9")
        .addField("Le hobgobelin va vous donner un coup de batte.", ":crossed_swords: " + y )
    } else if (result <= 101){
        // Dégat normaux
        y = Math.floor(y*1.2)
        var help_embed = new Discord.MessageEmbed()
        .setColor("#000000")
        .setImage("https://media1.giphy.com/media/WoLbiZxOu0Na83cfuD/giphy.gif")
        .addField("Le chef de la grotte va soudainement vous envoyer valser en l'air. Vous êtes maintenant hors combat pendant 2 tours(sans compter celui-là)", ":crossed_swords: " + y)
    } 
    message.channel.send(help_embed);
} 

if(command === 'gt'){
    id = message.author.id;
    if(bdd[id]){
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*1.3);
                var min = Math.floor(degat*1.1)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 15;
                ancienY = y;
                y = y - armure
                if(result <= 70){
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin essaye d'esquiver mais cela échoue !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .setTitle("Le gobelin réussit son esquive !")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(35);
                var min_value = Math.floor(25);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(5);
                var min_value = Math.floor(0);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                               bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze


                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze et **" + argent + "** pièces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'ga'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.9);
                var min = Math.floor(degat*0.85)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 22;
                if(result <= 15){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive pas à bloquer l'attaque !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 95) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("L'archer tant bien que de mal à bloquer le coup.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .addField("Le gobelin bloque l'attaque parfaitement !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(35);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(5);
                var min_value = Math.floor(0);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze et **" + argent + "** pièces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}


if(command === 'gas'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*1.1);
                var min = Math.floor(degat*0.9)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 25;
                if(result <= 10){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive ni à bloquer, ni à esquiver l'attaque !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 80) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("L'assassin essaye de bloquer le coup comme il peu, mais étant un assassin...Cela est bien plus difficile que ce qui n'y parait !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#000000")
                    .setTitle("Le gobelin va faire une pirouette en arrière, esquivant donc votre attaque.")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                result/reducteur;
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(8);
                var min_value = Math.floor(3);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze et **" + argent + "** pièces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}


if(command === 'gp'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.85);
                var min = Math.floor(degat*0.7)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 40;
                if(result <= 5){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le gobelin n'arrive pas à bloquer l'attaque!", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 70) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin bloque l'attaque sans trop de difficulté.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 85) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin va bloquer l'attaque et vous défier du regard. Vous êtes donc provoqué pour le prochain tour !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#41965c")
                    .addField("Le paladin va bloquer l'attaque à la perfection !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                }
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 26;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(50);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(7);
                var min_value = Math.floor(3);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze et **" + argent + "** pièces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'ch'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.9);
                var min = Math.floor(degat*0.75)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 30;
                if(result <= 10){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le chevalier maudit rate son blocage !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result < 90) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le chevalier maudit va bloquer l'attaque à l'aide de son épée.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 101) {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le chevalier maudit bloque une grande partie des dégâts !", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } 
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 40;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                console.log(args[1])
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(60);
                var min_value = Math.floor(40);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;

                var pieceArgent;
                var max_value = Math.floor(15);
                var min_value = Math.floor(10);
                var argent = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                argent = Math.floor(argent/reducteur);

                bdd[id].pieceArgent = bdd[id].pieceArgent + argent
                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze et **" + argent + "** pièces d'argent.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}

if(command === 'fm'){
    id = message.author.id;
    if(bdd[id]){ 
        if(args[0].toLowerCase() === 'blocage'){
                degat = args[1]
                // Pourcentage blocage
                var max = Math.floor(degat*0.95);
                var min = Math.floor(degat*0.82)
                var y = Math.min(Math.floor(Math.random() * (max - min + 1)  + min));
                var result = Math.floor((Math.random() * 100) + 1);

                var armure = 0;
                if(result <= 5){
                    y = Math.floor(y *1.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Le famillier n'arrive pas à esquiver l'attaque!", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result < 75) {
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .addField("Le famillier va bondir sur le côté, recevant néanmoins une partie des dégâts.", ":anger: " + y + " || = " + ancienY + " - :shield:" + armure+ " || ")
                } else if ( result <= 101) {
                    y = Math.floor(y *0.5)
                    ancienY = y;
                    y = y - armure
                    var help_embed = new Discord.MessageEmbed()
                    .setColor("#743ca9")
                    .setTitle("Le famillier esquive l'attaque.")
                } 
                message.channel.send(help_embed);
                
        } else if(args[0].toLowerCase() === "récompense"){
            id = message.author.id;
            if(bdd[id]){
                if(!args[1]){
                    message.channel.send("met le nombre de joueur.")
                } else {
                nbJoueur = args[1];
                var max_value = Math.floor(35);
                var min_value = Math.floor(30);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                var max;
                var min; 
                var LvlLoup = 20;
                var lvlJoueur = bdd[id].lvl;
                var nombre;
                if(lvlJoueur > LvlLoup){
                    nombre = lvlJoueur - LvlLoup; // 2
                    nombre =0.2*nombre;
                    nombre = 1 - nombre;
                    if(nombre < 0){
                        nombre = 0;
                    }
                } else {
                    nombre = LvlLoup - lvlJoueur; // 2
                    nombre =  0.2*nombre;
                    nombre = 1 + nombre;
                }
                result = Math.floor(result*nombre);
                xpActuel =  bdd[id].xp
                console.log(args[1])
                if(nbJoueur == 1){
                    reducteur = 1
                } else {
                    reducteur = nbJoueur*0.75
                }
                bdd[id].xp = Math.floor(bdd[id].xp + result/reducteur);

                var pieceBronze;
                var max_value = Math.floor(75);
                var min_value = Math.floor(50);
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;
                result = Math.floor(result/reducteur);
                pieceBronze = result;


                bdd[id].pieceBronze = bdd[id].pieceBronze + pieceBronze
     
                Savebdd();
                verif(false)
                message.channel.send("Bravo ! Vous avez gagné de l'experience. ")
                message.channel.send("Vous gagnez aussi **" + pieceBronze + "** pièces de bronze.")
                var embed = new Discord.MessageEmbed()
                .addField("Courbe d'XP",  xpActuel + " ---> " + bdd[id].xp)
                message.channel.send({embeds: [embed]});
                var channel = client.channels.cache.get('939189314779222043');
                channel.send('Commande : ' +  message.content + '\nID utilisateur : <@' + id +'>');
            }
            } else {
                message.channel.send("récompense de rien du tout mon reuf.")
            }
        }
    }
}



if(message.content.toLowerCase() === préfix + "epee de folie") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("épée de folie")
    .setColor("#4A007E")
    .setImage("https://cdna.artstation.com/p/assets/images/images/021/026/414/large/francois-cannels-brightswordfinal-lowres.jpg?1570090378")
    .addField(":trident: **__Compétence__**","Vous débloquez la compétence : ?Mparade [dégâts reçu]")
    .addField(":crossed_swords: **__Classe utilisable__**","Chevalier")
    .addField(":beginner: **__Passif__**", "L'épée de folie est comme son nom l'indique une épée qui vous rendra fou...Elle rend petit à petit impulsif son porteur, voir le transformera peu à peu en ''bête'' dans le sens où il ne sera pas rare que ce dernier grogne face à un doute ou lorsqu'il y a un problème. Le problème majeur de cette épée, est qu'au bout d'une semaine complète, le porte deviendra bien plus qu'impulsif.")
    .addField(":beginner: **__Passif (suite)__**","Frapper(avec de réelle compétences) ses compagnons lorsqu'il y a un désaccord ou bien hurler sur quelqu'un pour la moindre petites bêtises ou doute sera votre quotidien....Vous n'arriverez plus à redevenir quelqu'un de calme. Votre sang froid aura totalement disparu pour laisser place peu à peu à un être nourrit par la violence et la haine. Néanmoins ! Votre impulsivité et vos ''hurlements'' peuvent disparaître temporairement uniquement si toutes les personnes de votre groupes sont des démons, ou bien des Berserks. Ou bien, que vous soyez éloigné de tous conflits et de toutes zones PVE durant 2-3 jours.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme légendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre epee de folie")
    message.channel.send(help_embed);   
}

if(command === 'mparade'){
    id = message.author.id;
    if(bdd[id]){
        armor = bdd[id].ARactuel
        if(args[1] == "perce"){
            numeroUno = true;
            armor = 0
        } else {
            numeroUno = false;
        }
        test = verifArgs()
        if(test != 0){
            var nombre = Math.floor((Math.random() * 100) + 1);
            var min = Math.floor(Math.min(args[0]*1.6));
            var max = Math.floor(Math.max(args[0]*1.9)); 
            var result = Math.floor(Math.random() * (max - min + 1) ) + min;
            if(nombre < 0 ){
                HP = HPblocage(result, numeroUno)
                var y =new Discord.MessageEmbed()
                .setColor("#E74C3C")
                .addField("**Défense**","**Votre parade est un echec !** \n|| :anger:-" + result + " + 🛡️ " + armor + " = -" + degat +"||\n ❤️ " + HP + "-----> ❤️ " + bdd[id].HPactuel)
                .setImage("https://i.imgur.com/Lpv5HId.jpg")
            } else {
                    var min = Math.floor(Math.min(args[0]*1.2));
                    var max = Math.floor(Math.max(args[0]*1.4)); 
                    var Degat = Math.floor(Math.random() * (max - min + 1) ) + min;
                var y =new Discord.MessageEmbed()
                .setColor("#489ed7")
                .addField("**Défense**","**Votre parade au corps à corps est une réussite ! Vous ne recevez aucun dégât et infligez des dégâts proportionnels à l'attaque de votre adversaire !** \n :anger: " + Degat)
                .setImage("https://j.gifs.com/5QWDJB.gif")
            }
            Savebdd();
            message.channel.send(y);
            if(bdd[id].HPactuel <= 0){
                message.member.setNickname(bdd[id].prenom + "  [☠️ KO]")
            } else {
                message.member.setNickname(bdd[id].prenom + " [❤️" + bdd[id].HPactuel + "] [🛡️"+bdd[id].ARactuel +"] [✨" + bdd[id].MAactuel + "]")
            }
        } else {
            message.channel.send("Le nombre ! ")
        }
    }else{
        message.channel.send("Protège toi de ta débilité")
    }
}


if(message.content.toLowerCase() === préfix + "ancien arc elfique") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Ancien arc elfique")
    .setColor("#4A007E")
    .setImage("https://www.wallpaperflare.com/static/975/682/411/fantasy-art-bow-and-arrow-kitsunemimi-man-wallpaper.jpg")
    .addField(":trident: **__Compétence__**","Vous débloquez la compétence : ?Tir de zone [nombre de cibles]")
    .addField(":bow_and_arrow: **__Classe utilisable__**","Archer")
    .addField(":beginner: **__Passif__**", "Le malus de l'arc est simple...Au bout de deux semaines vous deviendrez complétement aveugle en contre partie d'une ''superbe ouïe''. En soit vous pourrez savoir quand quelqu'un se déplace/réussirait à vous l'imaginer dans la tête et j'en passe...Mais jamais (à moins d'abandonner l'arc) vous ne pourrez retrouver la vue.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme légendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre ancien arc elfique")
    message.channel.send(help_embed);     
}


if(SuperArgs[0].toLowerCase() ==  '-tir' && SuperArgs[1] == 'de' && SuperArgs[2] == 'zone'){    
    id = message.author.id;
    if(bdd[id]){
        if (bdd[id].MAactuel >= 70){
            NbEnnemis = parseInt(SuperArgs[3])

            if(Number.isInteger(NbEnnemis)){

                var nombre = Math.floor((Math.random() * 100) + 1);
                attaque = bdd[id].ATactuel;
                var max_value = Math.floor(attaque*0.7);
                var min_value = Math.floor(attaque*0.5)
                var result = Math.floor(Math.random() * (max_value - min_value + 1) ) + min_value;

                multiplicateur = 1 + 0.15 * NbEnnemis;
                result = Math.floor(result*multiplicateur)
                id = message.author.id; 
                ancienMana = bdd[id].MAactuel
                if(nombre < 10)
                    var y = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .setAuthor("Votre tir de zone ne fonctionne pas...")
                    .setImage("https://i.kym-cdn.com/photos/images/original/000/911/028/14e.jpg")
                else       {   
                    bdd[id].MAactuel = bdd[id].MAactuel - 80
                    var y = new Discord.MessageEmbed()
                    .setColor("#e21700")
                    .addField("**Attaque**","**Vous tirez une pluie de flèche sur la totalité de vos adversaire(Plus il y a d'adversaires, plus la compétence monte en dégâts).**\n" +  ":bow_and_arrow:" + result + "\n :sparkles: " + ancienMana + " -----> :sparkles: " +  bdd[id].MAactuel)
                    .setImage("https://i.pinimg.com/originals/12/d6/62/12d66280a3a7a9abc2b3e03e09bd01cc.jpg")
                } 
                nomRP()
                Savebdd()
                message.channel.send(y);
            }
        } else {
            message.channel.send("Vous n'avez plus de mana")
        }
        
    } else {
        message.channel.send("Tu n'es pas enregistré, ne crie pas sale enfant")
    }
}


if(message.content.toLowerCase() === préfix + "dague sinistre") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Dague sinistre")
    .setColor("#4A007E")
    .setImage("https://cdnb.artstation.com/p/assets/images/images/017/828/425/large/kostiantyn-buryak-poster.jpg?1557479551")
    .addField(":trident: **__Compétence__**","Vous débloquez la compétence ?Mesquive [dégâts reçu]")
    .addField(":dagger: **__Classe utilisable__**","Assassin")
    .addField(":beginner: **__Passif__**", "Le porteur de la dague va petit à petit devenir quelqu'un de bien silencieux...Si dans le passé il était diplomate, alors il pourra abandonner les grands discours laissant maintenant place à des chuchotements auprès de ses camarades. D'ailleurs, rare sont les personnes auxquelles il voudra communiquer. Cela se limitera généralement à 2-3 personnes, ou bien à d'autres membres qui seraient de la lignée des voleurs")
    .addField(":beginner: **__Passif (suite)__**","Il y a 3 exceptions à cette règle. S'il vous veut du mal, alors il parlera d'une voix lambda et cela même si ses paroles pourraient vous laissé croire le contraire ! À l'inverse, s'il vous apprécie un peu trop ou qu'il vous porte un peu trop d'intérêt...Alors un côté ''protecteur'' pourrait se voir n'être en lui. Si vous n'êtes ni un de ses camarades, ni un voleur et qu'il se sent forcé de vous répondre, alors il peut faire quelques gestuelles...Mais ce n'est pas le language des signes ! Cela se limitera à des signes basiques.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme légendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre dague sinistre")
    message.channel.send(help_embed);     
}


if(command === 'mesquive'){
    id = message.author.id;
    if(bdd[id]){
        armor = bdd[id].ARactuel
        if(args[1] == "perce"){
            numeroUno = true;
            armor = 0
        } else {
            numeroUno = false;
        }   
             var min = Math.floor(Math.min(args[0]*1.4));
        var max = Math.floor(Math.max(args[0]*1.7)); 
        var result = Math.floor(Math.random() * (max - min + 1) ) + min;
        var min = 0
        var max = 100
        var aleatoire = Math.floor(Math.random() * (max - min + 1) ) + min;
        /// BDD

            chance = 65;
            if(aleatoire < chance){
                var y = new Discord.MessageEmbed()
                .setColor("#ff4444")
                .addField("**Défense**","**Vous esquivez l'attaque grâce à votre grande agilité.**")
                .setImage("https://static.wikia.nocookie.net/onepunchman/images/1/17/Sonic_dodges_genos.gif")
            } else {
                HP = HPblocage(result)
                Savebdd(); 
                if(bdd[id].HPactuel <= 0){
                    message.member.setNickname(bdd[id].prenom + "  [☠️ KO]")
                } else {
                    message.member.setNickname(bdd[id].prenom + " [❤️" + bdd[id].HPactuel + "] [🛡️"+bdd[id].ARactuel +"] [✨" + bdd[id].MAactuel + "]")
                }
                var y =new Discord.MessageEmbed()
                .setColor("#E74C3C")
                .addField("**Défense**","**Votre roulade échoue...** \n|| :anger:-" + result + " + 🛡️ " + armor + " = -" + degat +"||\n ❤️ " + HP + " -----> ❤️ " + bdd[id].HPactuel)
                .setImage("https://i1.wp.com/www.animefeminist.com/wp-content/uploads/2018/10/6dc848b02d9417013345e6e92256f3b7.png?ssl=1")
            }
            message.channel.send(y);
        
    }
}

if(message.content.toLowerCase() === préfix + "grimoire abandonné") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Grimoire abandonné")
    .setColor("#4A007E")
    .setImage("https://img5.goodfon.com/wallpaper/nbig/5/4e/elena-kondratova-grimoire-cg-art-fentezi-kniga-magiia.jpg")
    .addField(":trident: **__Compétence__**","Vous débloquez la compétence : ?Disparition")
    .addField(":book: **__Classe utilisable__**","Sorcier et sorcier ténébreux")
    .addField(":beginner: **__Passif__**", "Le malus est plutôt simple. Déjà et premièrement, vous ne pouvez utiliser la compétence qu'une fois par jour. Ensuite, à partir du moment où vous utiliserez la compétence, vous aurez un mal de crâne interminable pendant une durée de 24h.")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme légendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre grimoire abandonné")
    message.channel.send(help_embed);     
}


if(message.content.toLowerCase() === préfix + "disparition"){    
    id = message.author.id;
    if(bdd[id]){
        if (talkedRecentlyGrimoire.has(message.author.id) && bdd[id].MAactuel > 150) {
            message.channel.send("Merci d'attendre 24h ou bien d'avoir au minimum 150 de mana.");
        } else {
                ancienMana = bdd[id].MAactuel
                bdd[id].MAactuel =  bdd[id].MAactuel - 150
                    var y = new Discord.MessageEmbed()
                    .setColor("#ffffff")
                    .addField("Disparition !", "Vous pouvez cibler un adversaire (sauf ''boss'') qui disparaîtra du combat(vous ne pouvez donc pas prendre sa récompense). Cette compétence n'est pas utilisable sur les joueurs, sauf si ce dernier est un Berserk, une liche, une ghoul, ou un démon(le joueur sera alors téléporté dans un autre channel(zone)).\nLa compétence est utilisable une fois toutes les 24h. Après son utilisation, le ''lanceur'' se verra être atteint d'une très grosse migraine quasi permanente pendant 12h, ce qui l'empêchera d'utiliser la moindre compétence (et donc, ne peux plus combattre à partir de la fin de son combat).\n :sparkles: " + ancienMana + " -----> :sparkles: " +  bdd[id].MAactuel)
                    .setImage("https://thumbs.gfycat.com/AdolescentRelievedBighornsheep-size_restricted.gif")
                message.channel.send(y);
                Savebdd()
                nomRP()
                talkedRecently3.add(message.author.id);
                setTimeout(() => {
                // Removes the user from the set after a minute
                talkedRecently3.delete(message.author.id);
                }, 86400000);
        } 
    } else {
        message.channel.send("Tu n'es pas enregistré, ne crie pas sale enfant")
    }
}


if(message.content.toLowerCase() === préfix + "bouclier maudit") {
    var help_embed = new Discord.MessageEmbed()
    .setTitle("Bouclier maudit")
    .setColor("#4A007E")
    .setImage("https://i.pinimg.com/originals/34/1f/48/341f482aaa1f2deed465239d124ce936.jpg")
    .addField(":trident: **__Compétence__**","Vous débloquez la compétence : ?Crie squelettique")
    .addField(":shield: **__Classe utilisable__**","Paladin")
    .addField(":beginner: **__Passif__**", "Le malus du bouclier est simple, plus vous allez passer du temps avec votre bouclier, plus vous allez finir schizophrène. Vous allez croire et être persuadé que le bouclier renferme un esprit qui est votre conseiller si ce n'est meilleur ami. Réalité ou bien simple malédiction ? Allez savoir. Le problème étant que ''l'esprit'' a un comportement qui peut radicalement changer selon son utilisateur.")
    .addField(":beginner: **__Passif (suite)__**", "Pour faire simple, l'esprit que va croire entendre le paladin est uniquement là pour lui dire si quelque chose est bien ou mal. Le paladin ne sait pas de quelle race était l'esprit, son nom, son prénom...Bref, ll ne sait absolument rien de lui ! Ce dernier se contente uniquement de lui dire si une chose est bien ou mal et cela va grandement influencer l'utilisateur sur ses choix. (Dans certains cas, cela peut-être un esprit ''hostile'' qui favorise les mauvais choix, et dans d'autres cas, il peut-être bienveillant).")
    .addField(":page_facing_up: **__Note__**", "Vous ne pouvez pas porter plus d'une arme légendaire sur vous.")
    .addField(":moneybag: Revente", "?Vendre bouclier maudit.")
    message.channel.send(help_embed);     
}

if(message.content.toLowerCase() === préfix + "crie squelettique"){    
    id = message.author.id;
    if(bdd[id]){
            if(nombre < 20)
                var y = new Discord.MessageEmbed()
                .setColor("#ffffff")
                .setAuthor("Votre hurlement n'a aucun effet...")
                .setImage("https://i.kym-cdn.com/photos/images/original/000/911/028/14e.jpg")
            else {
                var y = new Discord.MessageEmbed()
                .setColor("#e21700")
                .setTitle("Vous venez à taper sur votre bouclier tout en hurlant haut et fort. Vous avez provoqué tous les adversaires pour le prochain tour. S'ils attaquent, vous serez pris pour cible(utilisable une fois par combat).")
                .setImage("https://w.wallha.com/ws/7/CRvNGrWB.jpg")
             }
            message.channel.send(y);
    } else {
        message.channel.send("Tu n'es pas enregistré, ne crie pas sale enfant")
    }
}
/// Shop 